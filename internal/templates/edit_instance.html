<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ if .form.InstanceID }}Edit{{ else }}Create{{ end }} {{ .model.DisplayName }}</title>
    {{ template "header" . }}
</head>
<body>
    <div class="page">
        {{ template "sidebar" . }}
        
        <div class="page-wrapper">
            {{ template "navbar" . }}
            
            <div class="page-body">
                <div class="container-xl">
                    <!-- Page header -->
                    <div class="page-header d-print-none">
                        <div class="container-xl">
                            <div class="row g-2 align-items-center">
                                <div class="col">
                                    <nav aria-label="breadcrumb">
                                        <ol class="breadcrumb">
                                            <li class="breadcrumb-item"><a href="{{ .model.App.Panel.GetFullLink }}">Home</a></li>
                                            <li class="breadcrumb-item"><a href="{{ .model.App.GetFullLink }}">{{ .model.App.DisplayName }}</a></li>
                                            <li class="breadcrumb-item"><a href="{{ .model.GetFullLink }}">{{ .model.DisplayName }}</a></li>
                                            <li class="breadcrumb-item active">
                                                {{ if .form.InstanceID }}Edit{{ else }}Create{{ end }}
                                            </li>
                                        </ol>
                                    </nav>
                                    <h2 class="page-title">
                                        {{ if .form.InstanceID }}Edit{{ else }}Create{{ end }} {{ .model.DisplayName }}
                                    </h2>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Form content -->
                    <div class="page-body">
                        <div class="container-xl">
                            <div class="row">
                                <div class="col-md-8 offset-md-2">
                                    <form method="post" action="{{ if .form.InstanceID }}{{ .model.GetFullLink }}/{{ .form.InstanceID }}/edit{{ else }}{{ .model.GetFullAddLink }}{{ end }}" class="card">
                                        <div class="card-header">
                                            <h3 class="card-title">
                                                {{ .model.DisplayName }} Details
                                            </h3>
                                        </div>
                                        <div class="card-body">
                                            {{ if .formErrs }}
                                            <div class="alert alert-danger" role="alert">
                                                <ul class="mb-0">
                                                {{ range .formErrs }}
                                                    <li>{{ . }}</li>
                                                {{ end }}
                                                </ul>
                                            </div>
                                            {{ end }}
                                            
                                            <!-- Render form fields with Tabler styling -->
                                            {{ formAsTabler .form .formErrs .fieldErrs }}
                                        </div>
                                        <div class="card-footer text-end">
                                            <div class="d-flex">
                                                <a href="{{ .model.GetFullLink }}" class="btn me-auto">Cancel</a>
                                                <button type="submit" class="btn btn-primary">
                                                    {{ if .form.InstanceID }}Update{{ else }}Create{{ end }}
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {{ template "footer" . }}
</body>
</html>
